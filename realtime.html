<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Data Realtime</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: rgb(94, 15, 221);
    }

    .container {
      background-image: url(1170296.jpg);
      background-size: 118%;
      width: 1200px;
      height: 800px;
      border-radius: 1em;
      padding: 2em;
      display: flex;
      flex-direction: column;
      gap: 1em;
    }

.profile {
  background-image: linear-gradient(144deg, #AF40FF, #5B42F3 50%, #00DDEB);
  border-radius: 1em;
  padding: 1.5em;
  display: flex;
  align-items: center;

}

.profile-wrapper {
  display: flex;
  align-items: center;
  gap: 1.5em;
}

.profile-img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #fff;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.3);
}

.bio-info {
  color: white;
}

.bio-info h3 {
  font-size: 1.6rem;
  margin-bottom: 0.3rem;
}

.bio-info p {
  font-size: 1rem;
  opacity: 0.85;
  font-style: italic;
}


    .rows-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end; /* posisikan ke bawah */
    }

    .rows {
      display: flex;
      gap: 1em;
      width: 100%;
    }

    .row {
  border: 10px solid transparent;
  border-radius: 1em;
  height: 580px;
  border-image: linear-gradient(144deg, #AF40FF, #5B42F3 50%, #00DDEB) 1; 
  align-items: center;
}


    .row-1 {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;  
    gap: 10em;
    flex-direction: column; 
}



    .row-2 {
      flex: 2;
      display: flex;
      justify-content: center;
      align-items: center;  
      gap: 1em;
      flex-direction: column; 
      align-items: center;
    }

    .row-3 {
      flex: 2;
      display: flex;
      justify-content: center;
      align-items: center;  
      gap: 1em;
      flex-direction: column; 
    }

/* The switch - the box around the slider */
.switch {
  font-size: 17px;
  position: relative;
  display: inline-block;
  width: 3.5em;
  height: 2em;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: #d4acfb;
  border-radius: 50px;
  transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
}

.slider:before {
  position: absolute;
  content: "";
  height: 1.4em;
  width: 1.4em;
  left: 0.3em;
  bottom: 0.3em;
  background-color: white;
  border-radius: 50px;
  box-shadow: 0 0px 20px rgba(0,0,0,0.4);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.switch input:checked + .slider {
  background: #b84fce;
}

.switch input:focus + .slider {
  box-shadow: 0 0 1px #b84fce;
}

.switch input:checked + .slider:before {
  transform: translateX(1.6em);
  width: 2em;
  height: 2em;
  bottom: 0;
}


.card {
  width: 250px;
  height: 400px;
  border-radius: 20px;
  padding: 5px;
  box-shadow: rgba(151, 65, 252, 0.2) 0 15px 30px -5px;
  background-image: linear-gradient(144deg,#AF40FF, #5B42F3 50%,#00DDEB);
}

.card__content {
  background: rgb(5, 6, 45);
  border-radius: 17px;
  width: 100%;
  height: 100%;
}


/* From Uiverse.io by KSAplay */ 
.card {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  width: 220px;
  height: 350px;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 12px 12px 0px rgba(0, 0, 0, 0.1);
  background-color: white;
}

/* Landscape section */
.landscape-section {
  position: relative;
  width: 100%;
  height: 70%;
  overflow: hidden;
}

.landscape-section * {
  position: absolute;
}

.sky {
  width: 100%;
  height: 100%;
  background: rgb(247, 225, 87);
  background: linear-gradient(
    0deg,
    rgba(247, 225, 87, 1) 0%,
    rgba(233, 101, 148, 1) 100%
  );
}

.sun {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  background-color: white;
  bottom: 40%;
  left: 23%;
  filter: drop-shadow(0px 0px 10px white);
}

.sun::after {
  position: absolute;
  content: "";
  width: 118%;
  height: 118%;
  border-radius: 50%;
  background-color: white;
  opacity: 0.5;
}

.sun::before {
  position: absolute;
  content: "";
  width: 134%;
  height: 134%;
  border-radius: 50%;
  background-color: white;
  opacity: 0.1;
}

.ocean {
  overflow: hidden;
  bottom: 0;
  width: 100%;
  height: 28%;
  background: rgb(241, 192, 125);
  background: linear-gradient(
    0deg,
    rgba(241, 192, 125, 1) 0%,
    rgba(247, 218, 150, 1) 100%
  );
}

.reflection {
  position: absolute;
  background-color: white;
  opacity: 0.5;
  z-index: 1;
}

.reflection:nth-child(1) {
  width: 40px;
  height: 10px;
  clip-path: polygon(0% 0%, 100% 0%, 50% 20%);
  top: 5%;
  left: 32%;
}

.reflection:nth-child(2) {
  width: 80px;
  height: 15px;
  clip-path: polygon(0% 0%, 100% 0%, 60% 20%, 40% 20%);
  top: 15%;
  left: 39%;
}

.reflection:nth-child(3) {
  width: 60px;
  height: 2px;
  clip-path: polygon(0% 50%, 40% 0%, 60% 0%, 100% 50%, 60% 100%, 40% 100%);
  top: 27%;
  right: 15%;
}

.reflection:nth-child(4) {
  width: 70px;
  height: 2px;
  clip-path: polygon(0% 50%, 40% 0%, 60% 0%, 100% 50%, 60% 100%, 40% 100%);
  top: 37%;
  right: 28%;
}
.reflection:nth-child(5) {
  width: 70px;
  height: 3px;
  clip-path: polygon(0% 50%, 40% 0%, 60% 0%, 100% 50%, 60% 100%, 40% 100%);
  top: 46%;
  right: 8%;
}

.hill-1 {
  right: -25%;
  bottom: 20%;
  width: 150px;
  height: 40px;
  border-radius: 50%;
  background-color: #e6b29d;
}

.shadow-hill-1 {
  right: -25%;
  top: -30%;
  width: 150px;
  height: 40px;
  border-radius: 50%;
  background-color: #f1c7a0;
  opacity: 1;
}

.hill-2 {
  right: -36%;
  bottom: 10%;
  width: 150px;
  height: 80px;
  border-radius: 50%;
  background-color: #c29182;
}

.shadow-hill-2 {
  right: -36%;
  top: -65%;
  width: 150px;
  height: 80px;
  border-radius: 50%;
  background-color: #e5bb96;
  opacity: 1;
}

.hill-3 {
  left: -100%;
  bottom: -28%;
  width: 350px;
  height: 150px;
  border-radius: 50%;
  background-color: #b77873;
  z-index: 3;
}

.tree-1 {
  bottom: 20%;
  left: 3%;
  width: 50px;
  height: 70px;
  z-index: 3;
}

.tree-2 {
  bottom: 14%;
  left: 25%;
  width: 50px;
  height: 70px;
  z-index: 3;
}

.hill-4 {
  right: -100%;
  bottom: -40%;
  width: 350px;
  height: 150px;
  border-radius: 50%;
  background-color: #a16773;
  z-index: 3;
}

.tree-3 {
  bottom: 10%;
  right: 1%;
  width: 65px;
  height: 80px;
  z-index: 3;
}

.filter {
  height: 100%;
  width: 100%;
  background: linear-gradient(
    0deg,
    rgba(255, 255, 255, 1) 0%,
    rgba(255, 255, 255, 0) 40%
  );
  z-index: 5;
  opacity: 0.2;
}
/*batas*/


  .ultrasonic-box {
    background-image: linear-gradient(144deg,#AF40FF, #5B42F3 50%,#00DDEB);
    color: #0ff;
    padding: 2rem;
    border-radius: 1rem;
    text-align: center;
    box-shadow: 0 0 15px #0ff5;
    margin: 1rem; 
    height: 308px;
    
  }

  .ultrasonic-box h2 {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }

  #ultrasonic-distance {
    font-size: 3rem;
    font-weight: bold;
  }


/* Content section */
.env-card-upgraded {
  width: 280px;
  margin: 10px;
  padding: 20px;
  border-radius: 20px;
  background-image: linear-gradient(144deg,#AF40FF, #5B42F3 50%,#00DDEB);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.env-card-upgraded .card-title {
  font-weight: 700;
  margin-bottom: 20px;
  font-size: 1.25rem;
  color: #1a1a1a;
}

.env-block {
  margin-bottom: 15px;
}

.env-icon {
  font-size: 2.2rem;
}

.env-label {
  font-size: 1rem;
  margin-top: 5px;
  color: #333;
}

.env-value {
  font-size: 1.6rem;
  font-weight: bold;
  color: #222;
}

.env-status {
  font-size: 0.9rem;
  margin-top: 4px;
  color: #007bff;
  font-style: italic;
}


  </style>
</head>
<body>
  <div class="container">
    <div class="profile"> 
      <div class="profile-wrapper">
        <img src="ChatGPT Image Apr 15, 2025, 09_29_39 AM.png" class="profile-img" alt="Foto Profil">
        <div class="bio-info">
          <h3>Dika Aditya N</h3>
          <p>XIIK3</p>
          <p>RPL</p>
        </div>
      </div>
    </div>
    
    <div class="rows-wrapper">
      <div class="rows">
        <div class="row row-1" > 
          <label class="switch" for="checkbox-1" >
          <input 
          id="checkbox-1"
          type="checkbox"
          onclick="toggleLED(1)">
          <span class="slider"></span>
          </label>

          <label class="switch" for="checkbox-2">
            <input 
            id="checkbox-2"
            type="checkbox"
            onclick="toggleLED(2)">   
            <span class="slider"></span>
            </label>

            <label class="switch" for="checkbox-3">
              <input 
              id="checkbox-3"
              type="checkbox"
              onclick="toggleLED(3)">
              <span class="slider"></span>
              </label>
        </div>
        <div class="row row-2">
          <div class="card">
            <div class="card__content">
              <div class="ultrasonic-box">
                <h2>Jarak</h2> <br> <br> <br>
                <h1 id="nilaisuhu">-- cm</h1>
              </div>
            </div>
          </div>
        </div>
        <div class="row row-3">

          <div class="card env-card-upgraded">
            <div class="card-body text-center">
              <h5 class="card-title">Kondisi Lingkungan</h5>
          
              <div class="env-block">
                <div class="env-icon">üå°Ô∏è</div>
                <div class="env-label">Suhu</div>
                <div class="env-value" id="tempID">--¬∞C</div>
                <div class="env-status" id="tempStatus">--</div>
              </div>
          
              <hr>
          
              <div class="env-block">
                <div class="env-icon">üíß</div>
                <div class="env-label">Kelembaban</div>
                <div class="env-value" id="humidID">-- %</div>
                <div class="env-status" id="humidStatus">--</div>
              </div>
            </div>
          </div>
          
          
          
          
        
        </div>
      </div>
    </div> 
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
    import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";
  
    // Konfigurasi Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBfvs5rKyZ-6k9sGmuGoJYlnw4BKkLPD-U",
      authDomain: "fir-arduinoled-4914b.firebaseapp.com",
      databaseURL: "https://fir-arduinoled-10b7a-default-rtdb.asia-southeast1.firebasedatabase.app/",
      projectId: "fir-arduinoled-4914b",
      storageBucket: "fir-arduinoled-4914b.firebasestorage.app",
      messagingSenderId: "716075952357",
      appId: "1:716075952357:web:3be9d25ad39bd62d164c0c",
      measurementId: "G-21RW9SRKJ6"
    };
  
    // Inisialisasi Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const LedRef = ref(db, "dataLED");
    const dhtRef = ref(db, "dataDHT");
    const usRef = ref(db, "dataUltrasonic");
  
    let humidity = 19; 
    let temperature = 30;
  
    function updateWeatherCondition(tempValue) {
      const conditionElement = document.getElementById("conditionID");
      if (tempValue >= 0 && tempValue < 19) {
        conditionElement.textContent = "Dingin";
      } else if (tempValue >= 19 && tempValue < 31) {
        conditionElement.textContent = "Sedang";
      } else {
        conditionElement.textContent = "Panas";
      }
    }
  
    function updateWeather(humidValue, tempValue) {
      document.getElementById("tempID").innerHTML = `<span>${tempValue}&deg;</span>`;
      document.getElementById("humidID").textContent = `${humidValue}%`;
  
      let iconClass = "wi wi-tornado";
      if (humidValue < 20) iconClass = "wi wi-day-sunny";
      else if (humidValue <= 50) iconClass = "wi wi-day-fog";
      else iconClass = "wi wi-day-thunderstorm";
  
      document.getElementById("weatherIcon").innerHTML = `<i class="${iconClass}"></i>`;
      updateWeatherCondition(tempValue);
    }
  
    // Update status LED dari Firebase
    onValue(LedRef, (snapshot) => {
      if (snapshot.exists()) {
        const led = snapshot.val();
        Object.keys(led).forEach((key, index) => {
          document.getElementById(`checkbox-${index + 1}`).checked = led[key] === 1;
        });
        console.log("Status LED berubah", Object.values(led));
      } else {
        console.log("Data LED tidak ditemukan");
      }
    });
  
    // Update data DHT dari Firebase
    onValue(dhtRef, (snapshot) => {
      if (snapshot.exists()) {
        const data = snapshot.val();
        temperature = data.temperatur;
        humidity = data.humid;
        console.log("Temperature update", temperature);
        console.log("Kelembapan update", humidity);
        updateWeather(humidity, temperature);
      } else {
        console.log("Data DHT tidak ada");
      }
    }, (error) => {
      console.log("Error baca data DHT");
    });
  
    // Update data sensor Ultrasonic
    onValue(usRef, (snapshot) => {
      if (snapshot.exists()) {
        const data = snapshot.val();
        const nilaijarak = data.jarak;
        console.log("Jarak berubah", nilaijarak);
  
        document.querySelector(".ultrasonic-box").style.setProperty("--num", nilaijarak);
        document.getElementById("nilaisuhu").textContent = `${nilaijarak} Cm`;
      } else {
        console.log("Data ultrasonic tidak ada");
      }
    });
  
    // Fungsi untuk mengontrol LED dari checkbox
    window.toggleLED = () => {
      const ledState = [1, 2, 3].map(i => document.getElementById(`checkbox-${i}`).checked ? 1 : 0);
  
      set(LedRef, {
        led1: ledState[0],
        led2: ledState[1],
        led3: ledState[2],
      }).then(() => console.log("LED state updated in Firebase"))
        .catch(() => console.log("Failed to update LED state"));
    };
  </script>
</body>
</html>
